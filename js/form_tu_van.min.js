function formatPhoneNumber(phoneNumber) {
    let cleaned = ('' + phoneNumber).replace(/\D/g, ''); let match = cleaned.match(/^(\d{4})(\d{3})(\d{3})$/); if (match) { return '(' + match[1] + ') ' + match[2] + '-' + match[3] }
    return null
}
function onClickCreatePhonePC() {
    let sdt = document.getElementById('sdt_pc').value; 
    if (sdt.trim() !== '') {
        if (formatPhoneNumber(sdt)) {
            let baseUrl = window.location.href;
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "https://phongkhamtphcm.phongkhamandonghcm.com/api/tu-van/create-phone-tu-van.php", !0);
            xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    try {
                        let response = JSON.parse(xhr.responseText); 
                        if (response.status === 'success') { 
                            toastr.success(response.message); 
                            document.getElementById('sdt_pc').value = '' 
                        } else { 
                            toastr.error(response.message) 
                        }
                    } catch (e) { toastr.error("Đã xảy ra lỗi trong quá trình xử lý phản hồi từ máy chủ.") }
                }
            }; const formData = { 'sdt': sdt, "url": baseUrl }
            xhr.send(JSON.stringify(formData))
        } else { toastr.error("Số điện thoại không hợp lệ!") }
    } else { toastr.error("Số điện thoại không được bỏ trống") }
}